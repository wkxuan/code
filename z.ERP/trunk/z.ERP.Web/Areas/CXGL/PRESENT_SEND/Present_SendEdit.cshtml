@using z.ERP.Web.Areas.Share.Render
@using z.ERP.Entities.Enum
@using z.ERP.Web.Areas.Layout.Edit;
@using z.ERP.Entities;
@using z.ERP.Model;
@using z.Extensions;
@inherits EditViewBase<string>
@section head{
    <style>
        .leftcard .ivu-card-head {
            border-bottom:0px;
        }
    </style>
}

@section baseParam{    
}
@section detailParam{
    <row>
        <i-col span="12">
            <Card v-bind:padding=0 class="leftcard" shadow>
                <p slot="title"><span class="mustElement">*</span>消费明细</p>
                <div slot="extra">
                    <div class="tableBtnDiv" v-if="disabled">
                        <i-button type="primary" v-on:click="addticket">添加</i-button>
                        <i-button type="error" v-on:click="delticket">删除</i-button>
                        <i-button type="success" icon="md-settings" v-on:click="SUMticketamount">计算</i-button>
                    </div>
                </div>
                <row>
                    <i-col span="2" class="RowTitle">
                        终端号
                    </i-col>
                    <i-col span="6" class="RowText">
                        <i-input v-model="screenParam.POSNO" v-bind:disabled="!disabled" />
                    </i-col>     
                    <i-col span="2" class="RowTitle">
                        小票号
                    </i-col>
                    <i-col span="6" class="RowText">
                        <i-input v-model="screenParam.DEALID" v-bind:disabled="!disabled" />
                    </i-col>  
                    <i-col span="3" class="RowTitle">
                        金额合计
                    </i-col>
                    <i-col span="4" class="RowText">
                        <i-input v-model="screenParam.AMOUNTS" placeholder="" readonly/>
                    </i-col>                   
                </row>
                <yx-table v-bind:columns="screenParam.colDefticket" v-bind:height="400" selection
                          v-bind:data="dataParam.PRESENT_SEND_TICKET" v-bind:disabled="!disabled" ref="reftickets">
                </yx-table>
            </Card>
        </i-col>
        <i-col span="12">
            <Card v-bind:padding=0 class="righttopcard" shadow>
                <p slot="title">赠品列表</p>
                <yx-table v-bind:columns="screenParam.colDefpresent" v-bind:height="213" selection
                          v-bind:data="screenParam.PRESENT" v-bind:disabled="!disabled" ref="refpresents">
                </yx-table>
            </Card>
            <Card v-bind:padding=0 class="righttopcard" shadow>
                <p slot="title"><span class="mustElement">*</span>发放赠品明细</p>
                <div slot="extra">
                    <div class="tableBtnDiv" v-if="disabled">
                        <i-button type="primary" v-on:click="addpresentss">添加</i-button>
                        <i-button type="error" v-on:click="delpresentss">删除</i-button>
                    </div>
                </div>
                <yx-table v-bind:columns="screenParam.colDefpresents" v-bind:height="180" selection
                          v-bind:data="dataParam.PRESENT_SEND_ITEM" v-bind:disabled="!disabled" ref="refpresentss">
                </yx-table>
            </Card>
        </i-col>
    </row>
}