@inherits ViewBase<SrchRender>
@using z.ERP.Web.Areas.Share.Render
@using z.ERP.Web.Areas.Layout.Srch
@using z.MVC5.Views
@{
    Layout = ThisLayout;
}
@{
    WebFiles = new string[] {
                    "Areas/Layout/Srch/SrchStyle.css",
                    "/Content/echarts.js",
                    "Areas/Layout/Srch/_SrchLayout.js",
                };
}
@section head{
    @InitFiles(WebFiles)
    @RenderSection("head", false)
}

<div id="srch" v-cloak>
    <collapse v-model="panelName">
        <panel name="condition">
            查询条件
            <div style="float: right; width: 400px ;text-align: right;">
                <i-button type="text" shape="circle" icon="md-search" v-on:click="seach">查询</i-button>
                <i-button type="text" shape="circle" icon="md-refresh" v-on:click="clear">清空</i-button>

                @RenderSection("conditionBtn", false)
            </div>
            <div slot="content" class="srchParamContent">
                @*查询条件*@
                @RenderSection("conditionParam", true)
            </div>
        </panel>
        <panel name="echart" v-if="echartResult">
            可视化数据
            <div slot="content">
                @RenderSection("echartContent", false)
            </div>
        </panel>
        <panel name="result">
            查询结果
            <div style="float: right; width: 400px ;text-align: right;">
                <i-button type="text" shape="circle" icon="md-download" v-bind:loading="outputLoading" v-on:click="exp">
                    <span v-if="!outputLoading">导出</span>
                    <span v-else>正在处理</span>
                </i-button>
                @*<i-button type="text" shape="circle" icon="md-print" v-on:click="print">打印</i-button>*@

                @*增加结果按钮*@
                @RenderSection("resultBtn", false)
            </div>
            <div slot="content">
                @*结果显示*@
                <yx-table v-bind:columns="columns" v-bind:data="data" v-bind:loading="tbLoading" showindex=true></yx-table>
                <page v-bind:total="pagedataCount" v-bind:page-size="pageSize" show-total 
                      v-bind:current="currentPage"
                      v-on:on-change="changePageCount" v-bind:page-size-opts="arrPageSize"
                      show-sizer v-on:on-page-size-change="changePageSizer"></page>

                @RenderSection("resultOthers", false)
            </div>
        </panel>
    </collapse>
    @RenderSection("hide", false)
    @RenderSection("pops", false)
</div>

@section foot{
    @RenderSection("foot", false)
}